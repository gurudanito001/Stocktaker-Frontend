(this.webpackJsonpstocktakerfrontend=this.webpackJsonpstocktakerfrontend||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/user.15eeae14.svg"},19:function(e,t,a){e.exports=a.p+"static/media/correct.155dd59e.svg"},34:function(e,t,a){e.exports=a.p+"static/media/menu-white.6651dd8a.svg"},35:function(e,t,a){e.exports=a.p+"static/media/spareparts.9e4825ca.svg"},36:function(e,t,a){e.exports=a.p+"static/media/truck.478ab060.svg"},37:function(e,t,a){e.exports=a.p+"static/media/history.1f818a6e.svg"},39:function(e,t,a){e.exports=a.p+"static/media/menu.6c976902.svg"},40:function(e,t,a){e.exports=a.p+"static/media/notifications-orange.d19d65a5.svg"},42:function(e,t,a){e.exports=a(73)},47:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),r=a(33),n=a.n(r),o=(a(47),a(48),a(49),a(51),a(41)),c=a(10),i=a(2),m=a(3),d=a(5),u=a(4),p=a(9),h=a(7),g=a(6),b=a(1),E=a.n(b),N=a(19),f=a.n(N),v="https://boiling-scrubland-72876.herokuapp.com",y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value))},s.handleSubmit=function(e){e.preventDefault(),s.props.doesPasswordMatch(s.state.password)?(document.getElementById("emailErrorMessage").textContent="",s.props.setLoggedIn()):document.getElementById("emailErrorMessage").textContent="Incorrect Password"},s.validateEmail=function(e){e.preventDefault(),""!==s.state.email&&navigator.onLine?(document.getElementById("next").disabled=!0,E.a.get("".concat(v,"/api/user/findEmail/").concat(s.state.email)).then((function(e){null===e.data&&navigator.onLine&&(document.getElementById("emailErrorMessage").textContent="Invalid Email",document.getElementById("next").disabled=!1),200===e.status&&null!==e.data&&(s.setState({status:"OK"}),s.props.setUserDetails(e.data),localStorage.setItem("userId",e.data._id),document.getElementById("emailErrorMessage").textContent="")}))):""===s.state.email?document.getElementById("emailErrorMessage").textContent="Fill Email Address":!1===navigator.onLine&&(document.getElementById("emailErrorMessage").textContent="You are Offline"),localStorage.clear()},s.passwordField=function(){if("OK"===s.state.status)return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",required:!0,onChange:s.handleChange}))},s.greenTick=function(){if("OK"===s.state.status)return l.a.createElement("img",{src:f.a,alt:"green tick",height:"15",className:"ml-2"})},s.nextButton=function(){if(""===s.state.status)return l.a.createElement("button",{className:"btn btn-info",id:"next",onClick:s.validateEmail},"Next")},s.submitButton=function(){if("OK"===s.state.status)return l.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:s.handleSubmit},"Submit")},s.state={status:"",email:"",password:""},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email address  ",this.greenTick()),l.a.createElement("input",{type:"email",required:!0,className:"form-control",id:"email",onChange:this.handleChange,value:this.state.email})),this.passwordField(),l.a.createElement("label",{className:"text-danger d-block",id:"emailErrorMessage"}),this.submitButton(),this.nextButton())}}]),a}(l.a.Component),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value))},s.handleSubmit=function(e){e.preventDefault(),s.setState({disableSubmitBtn:!0});var t=s.state;E.a.get("".concat(v,"/api/user/add/"),t).then((function(e){console.log(e.data),200===e.status&&(document.getElementById("registerGreenTick").classList.remove("d-none"),document.getElementById("registerErrorMessage").textContent="",s.props.loadAllUsers(),s.clearState(),s.setState({disableSubmitBtn:!1}))})).catch((function(e){document.getElementById("registerErrorMessage").textContent="Email Already Exists",s.setState({disableSubmitBtn:!1})}))},s.clearState=function(){s.setState({fullname:""}),s.setState({gender:""}),s.setState({email:""}),s.setState({password:""})},s.state={fullname:"",gender:"",email:"",password:"",position:"",viewUsers:!1,grantUserPrivileges:!1,viewInventoryRecords:!1,addNewSparePart:!1,recordPurchase:!1,requestUsage:!1,authorizePurchase:!1,authorizeUsage:!1,viewItemHistory:!1,viewAllVehicles:!1,addNewVehicle:!1,editVehicle:!1,viewHistory:!1,disableSubmitBtn:!1},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"fullname"},"Full Name"),l.a.createElement("input",{type:"text",required:!0,className:"form-control",id:"fullname",placeholder:"Firstname Lastname",onChange:this.handleChange,value:this.state.fullname,minLength:"5"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"gender"},"Gender"),l.a.createElement("select",{className:"form-control",id:"gender",onChange:this.handleChange,value:this.state.gender},l.a.createElement("option",{value:""},"Select Gender"),l.a.createElement("option",{value:"male"},"male"),l.a.createElement("option",{value:"female"},"female"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email address"),l.a.createElement("input",{type:"email",required:!0,className:"form-control",id:"email",onChange:this.handleChange,value:this.state.email})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"text",required:!0,className:"form-control",id:"password",minLength:"5",onChange:this.handleChange,value:this.state.password})),l.a.createElement("label",{className:"text-danger d-block",id:"registerErrorMessage"}),l.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"registerSubmitBtn",disabled:this.state.disableSubmitBtn},"Submit"),l.a.createElement("img",{src:f.a,alt:"green tick",height:"15",id:"registerGreenTick",className:"ml-2 d-none"}))}}]),a}(l.a.Component),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e={body:{backgroundColor:"#3a3f51",height:"100vh"},card:{width:"380px"},navTabs:{boxShadow:"none"}};return l.a.createElement("section",{className:"d-flex align-items-center justify-content-center",style:e.body},l.a.createElement("div",{style:e.card},l.a.createElement("ul",{className:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},l.a.createElement("li",{className:"nav-item w-50"},l.a.createElement("a",{className:"nav-link btn text-white active",style:e.navTabs,id:"pills-home-tab","data-toggle":"pill",href:"#pills-home",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"Login")),l.a.createElement("li",{className:"nav-item w-50"},l.a.createElement("a",{className:"nav-link btn text-white",style:e.navTabs,id:"pills-profile-tab","data-toggle":"pill",href:"#pills-profile",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"Register"))),l.a.createElement("div",{className:"tab-content card",id:"pills-tabContent"},l.a.createElement("div",{className:"tab-pane fade show active p-3",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},l.a.createElement(y,{doesPasswordMatch:this.props.doesPasswordMatch,setUserDetails:this.props.setUserDetails,setLoggedIn:this.props.setLoggedIn,onSubmit:this.props.onSubmit})),l.a.createElement("div",{className:"tab-pane fade p-3",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"},l.a.createElement(w,{loadAllUsers:this.props.loadAllUsers})))))}}]),a}(l.a.Component),C=a(34),P=a.n(C);function S(e){return l.a.createElement("nav",{style:{borderBottom:"1px solid white",color:"white",boxShadow:"1px 7px 14px -7px rgba(0,0,0,0.7)"},className:"navbar"},l.a.createElement("li",{className:"d-flex align-items-center navbar-brand"},l.a.createElement("img",{src:P.a,alt:"menu button",width:"30",className:"p-2 d-xl-none mr-3",onClick:e.toggleSidebar}),"Company Name"))}var M=a(16),D=a.n(M);function U(e){return l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"32vh",color:"white"}},l.a.createElement("img",{src:D.a,width:"70",alt:"user avatar"}),l.a.createElement("p",{className:"font-weight-bold mb-0"},e.userName),l.a.createElement("p",null,e.position))}var I=a(35),A=a.n(I),k=a(36),O=a.n(k),q=a(37),F=a.n(q);function V(e){var t=function(){""!==e.openModal&&document.getElementById(e.openModal).click()};return l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"list-unstyled p-0 m-0"},l.a.createElement("li",null,l.a.createElement(p.b,{to:"/users",style:{boxShadow:"none"},className:"btn btn-outline-secondary btn-block d-flex align-items-center text-white p-3 border-0 m-0",onClick:function(){t()}},l.a.createElement("img",{src:D.a,alt:"user icon",height:"22",className:"mr-2"}),"Users")),l.a.createElement("li",null,l.a.createElement(p.b,{to:"/",style:{boxShadow:"none"},className:"btn btn-outline-secondary btn-block d-flex align-items-center text-white p-3 border-0 m-0",onClick:function(){t()}},l.a.createElement("img",{src:A.a,alt:"spareparts icon",height:"22",className:"mr-2"}),"Spare Parts")),l.a.createElement("li",null,l.a.createElement(p.b,{to:"/vehicles",style:{boxShadow:"none"},className:"btn btn-outline-secondary btn-block d-flex align-items-center text-white p-3 border-0 m-0",onClick:function(){t()}},l.a.createElement("img",{src:O.a,alt:"Truck icon",height:"22",className:"mr-2"}),"Vehicles")),l.a.createElement("li",null,l.a.createElement(p.b,{to:"/history",style:{boxShadow:"none"},className:"btn btn-outline-secondary btn-block d-flex align-items-center text-white p-3 border-0 m-0",onClick:function(){t()}},l.a.createElement("img",{src:F.a,alt:"History icon",height:"22",className:"mr-2"}),"History"))))}var B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).reportWindowSize=function(){s.setState({windowWidth:window.innerWidth})},s.changeSidebarStyle=function(){return s.state.windowWidth>1199?{height:"100vh",width:"240px",backgroundColor:"#3a3f51",zIndex:"2000",position:"sticky",top:"0px",left:"0px"}:{height:"100vh",width:"240px",backgroundColor:"#3a3f51",zIndex:"2000",position:"fixed",top:"0px",left:"0px"}},s.state={windowWidth:window.innerWidth},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("aside",{style:this.changeSidebarStyle(),id:"sidebar"},l.a.createElement(S,{toggleSidebar:this.props.toggleSidebar}),l.a.createElement(U,{userName:this.props.userName,position:this.props.position}),l.a.createElement(V,{openModal:this.props.openModal,currentScreen:this.props.currentScreen,setScreenDetails:this.props.setScreenDetails,toggleSidebar:this.props.toggleSidebar,windowWidth:this.state.windowWidth}),window.addEventListener("resize",this.reportWindowSize))}}]),a}(l.a.Component);function j(e){var t;return l.a.createElement("div",{className:"card mb-3 mx-auto mx-md-0",style:{maxWidth:"540px"}},l.a.createElement("div",{className:"row no-gutters"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"card-header h-100 bg-light text-center d-flex align-items-center justify-content-center py-4 border-0"},l.a.createElement("img",{src:D.a,className:"card-img",alt:"avatar",style:{width:"100px"}}))),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("div",{className:"card-body clearfix"},l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-4 text-secondary"},"Full Name"),l.a.createElement("span",{className:"col-sm-8"},e.fullname)),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-4 text-secondary"},"Gender"),l.a.createElement("span",{className:"col-sm-8"},e.gender)),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-4 text-secondary"},"Email"),l.a.createElement("span",{className:"col-sm-8"},e.email)),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-4 text-secondary"},"Position"),l.a.createElement("span",{className:"col-sm-8"},""!==(t=e.position)?t:"Not Specified")),function(){if(e.grantPrivileges)return l.a.createElement(p.b,{to:"/editUsers/"+e.id,className:"btn btn-link text-success float-left p-0"}," User Access ")}()))))}var z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).renderAllUsers=function(){return e.props.userDetails.viewUsers?e.props.allUsers.map((function(t){return l.a.createElement(s.Fragment,{key:t._id},l.a.createElement(j,{grantPrivileges:e.props.userDetails.grantUserPrivileges,id:t._id,fullname:t.fullname,gender:t.gender,email:t.email,position:t.position}))})):l.a.createElement("h5",{className:"text-danger"}," You need permission to view this page")},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"col px-4 pb-4"},this.renderAllUsers())}}]),a}(l.a.Component),H=a(39),L=a.n(H),R=a(40),_=a.n(R),Y={navbar:{boxShadow:"1px 5px 14px -7px rgba(0,0,0,0.7)",borderBottom:"1px solid white"},bellBadge:{color:"#B82601"},dropdownMenu:{minWidth:"240px",maxHeight:"500px",overflowY:"scroll"}},T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).listOfUnAuthorizedPurchases=function(){return e.props.userDetails.recordPurchase?e.props.unAuthorizedPurchases.map((function(e){return l.a.createElement(s.Fragment,{key:e._id},l.a.createElement("li",{className:"dropdown-item text-left p-0"},l.a.createElement(p.b,{to:"/authorization",className:"d-block text-decoration-none px-2 text-dark py-1"},e.itemName,l.a.createElement("span",{className:"badge badge-light ml-2",style:Y.bellBadge},e.quantity)," ",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.date.substring(0,10))),l.a.createElement("div",{className:"dropdown-divider m-0"})))})):"------------------"},e.listOfUnAuthorizedUsage=function(){return e.props.userDetails.requestUsage?e.props.unAuthorizedUsage.map((function(e){return l.a.createElement(s.Fragment,{key:e._id},l.a.createElement("li",{className:"dropdown-item text-left p-0"},l.a.createElement(p.b,{to:"/authorization",className:"d-block text-decoration-none px-2 text-dark py-1"},e.itemName,l.a.createElement("span",{className:"badge badge-light ml-2",style:Y.bellBadge},e.quantity)," ",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.date.substring(0,10)))))})):"------------------"},e.notificationNumber=function(){return e.props.userDetails.recordPurchase&&e.props.userDetails.requestUsage?e.props.unAuthorizedPurchases.length+e.props.unAuthorizedUsage.length:e.props.userDetails.recordPurchase?e.props.unAuthorizedPurchases.length:e.props.userDetails.requestUsage?e.props.unAuthorizedUsage.length:0},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("nav",{style:Y.navbar,className:"navbar navbar-light sticky-top bg-white mb-4"},l.a.createElement("li",{className:"d-flex align-items-center navbar-brand"},l.a.createElement("img",{src:L.a,alt:"menu button",width:"30",className:"p-2 mr-3",onClick:this.props.toggleSidebar}),"Inventory Application"),l.a.createElement("div",{className:"dropdown ml-auto p-0"},l.a.createElement("button",{className:"btn bg-transparent dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right text-center","aria-labelledby":"dropdownMenuButton"},l.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.props.logout},"Logout"))),l.a.createElement("div",{className:"dropdown"},l.a.createElement("button",{className:"btn bg-transparent",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.a.createElement("img",{src:_.a,alt:"notification bell",width:"21"}),l.a.createElement("span",{className:"badge badge-light",style:Y.bellBadge},this.notificationNumber())),l.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right py-2 list-unstyled","aria-labelledby":"dropdownMenuButton",style:Y.dropdownMenu},l.a.createElement("h6",{className:"pl-2"},"Purchases"),this.listOfUnAuthorizedPurchases(),l.a.createElement("h6",{className:"pl-2 mt-2"},"Usage"),this.listOfUnAuthorizedUsage())))}}]),a}(l.a.Component),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){s.setUserDetails()},s.setUserDetails=function(){var e=window.location.href,t=e.substr(e.length-24,e.length).toString(),a=s.props.userAccessDetails(t);s.setState({userDetails:a})},s.componentWillReceiveProps=function(){s.setUserDetails()},s.handleChange=function(e){var t=s.state.userDetails;t.position=e.target.value,s.setState({userDetails:t})},s.setUserPrivilege=function(e){var t=s.state.userDetails;t[e]=!t[e],s.setState({userDetails:t})},s.handleSubmit=function(e){e.preventDefault(),s.setState({disableSubmitBtn:!0});var t=s.state.userDetails;E.a.post("http://localhost:5000/users/update/"+s.state.userDetails._id,t).then((function(e){200===e.status&&(s.props.updateUserDetails(t),s.props.setMessage("success","User Details Updated"),setTimeout(s.props.clearMessage,5e3),s.setState({disableSubmitBtn:!1}))}))},s.state={disableSubmitBtn:!1,userDetails:{}},s}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.props.userDetails.grantUserPrivileges?l.a.createElement("div",{className:"col px-4 pb-5"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Full Name"),l.a.createElement("span",{className:"col-sm-8"},this.state.userDetails.fullname)),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Gender"),l.a.createElement("span",{className:"col-sm-8"},this.state.userDetails.gender)),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Email"),l.a.createElement("span",{className:"col-sm-8"},this.state.userDetails.email)),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"position",className:"col-sm-2 col-form-label  text-secondary"},"Position"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"position",style:{maxWidth:"300px"},defaultValue:this.state.userDetails.position,onChange:this.handleChange}))),l.a.createElement("div",{className:"dropdown-divider w-50"}),l.a.createElement("h6",{className:"mt-3"},"Users"),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.viewUsers,className:"custom-control-input",id:"viewUsers",onChange:function(){e.setUserPrivilege("viewUsers")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"viewUsers"},"View Users")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.grantUserPrivileges,value:this.state.userDetails.grantUserPrivileges,className:"custom-control-input",id:"grantUserPrivileges",onChange:function(){e.setUserPrivilege("grantUserPrivileges")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"grantUserPrivileges"},"Grant User Privileges")),l.a.createElement("h6",{className:"mt-3"},"Spare Parts"),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.viewInventoryRecords,value:this.state.userDetails.viewInventoryRecords,className:"custom-control-input",id:"viewInventoryRecords",onChange:function(){e.setUserPrivilege("viewInventoryRecords")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"viewInventoryRecords"},"View Inventory Records")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.addNewSparePart,value:this.state.userDetails.addNewSparePart,className:"custom-control-input",id:"addNewSparePart",onChange:function(){e.setUserPrivilege("addNewSparePart")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"addNewSparePart"},"Add New Spare Part")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.recordPurchase,value:this.state.userDetails.recordPurchase,className:"custom-control-input",id:"recordPurchase",onChange:function(){e.setUserPrivilege("recordPurchase")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"recordPurchase"},"Record Purchase")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.requestUsage,value:this.state.userDetails.requestUsage,className:"custom-control-input",id:"requestUsage",onChange:function(){e.setUserPrivilege("requestUsage")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"requestUsage"},"Request Usage")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.authorizePurchase,value:this.state.userDetails.authorizePurchase,className:"custom-control-input",id:"authorizePurchase",onChange:function(){e.setUserPrivilege("authorizePurchase")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"authorizePurchase"},"Authorize Purchase")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.authorizeUsage,value:this.state.userDetails.authorizeUsage,className:"custom-control-input",id:"authorizeUsage",onChange:function(){e.setUserPrivilege("authorizeUsage")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"authorizeUsage"},"Authorize Usage")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.viewItemHistory,value:this.state.userDetails.viewItemHistory,className:"custom-control-input",id:"viewItemHistory",onChange:function(){e.setUserPrivilege("viewItemHistory")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"viewItemHistory"},"View Item History")),l.a.createElement("h6",{className:"mt-3"},"Vehicles"),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.viewAllVehicles,value:this.state.userDetails.viewAllVehicles,className:"custom-control-input",id:"viewAllVehicles",onChange:function(){e.setUserPrivilege("viewAllVehicles")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"viewAllVehicles"},"View All Vehicles")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.addNewVehicle,value:this.state.userDetails.addNewVehicle,className:"custom-control-input",id:"addNewVehicle",onChange:function(){e.setUserPrivilege("addNewVehicle")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"addNewVehicle"},"Add New Vehicle")),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.editVehicle,value:this.state.userDetails.editVehicle,className:"custom-control-input",id:"editVehicle",onChange:function(){e.setUserPrivilege("editVehicle")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"editVehicle"},"Edit Vehicle")),l.a.createElement("h6",{className:"mt-3"},"History"),l.a.createElement("div",{className:"custom-control custom-switch mb-2"},l.a.createElement("input",{type:"checkbox",checked:this.state.userDetails.viewHistory,value:this.state.userDetails.viewHistory,className:"custom-control-input",id:"viewHistory",onChange:function(){e.setUserPrivilege("viewHistory")}}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"viewHistory"},"View History")),l.a.createElement("button",{type:"submit",disabled:this.state.disableSubmitBtn,className:"btn btn-primary mt-3",id:"userAccessSubmitBtn"},"Save Changes"))):l.a.createElement("h5",{className:"text-danger"}," You need Permission to view this Page")}}]),a}(l.a.Component),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("border-danger")},s.calcAverageUnitCost=function(e,t){var a,s,l,r;a=parseInt(e.averageUnitCost),s=parseInt(e.quantity),l=parseInt(t.cost),r=parseInt(t.quantity),console.log(a),console.log(l);var n=(a*s+l*r)/(s+r);return 100*Math.ceil(n/100)},s.handleSubmit=function(e){if(e.preventDefault(),s.requiredFieldsAreFilled()){if(s.props.userDetails.recordPurchase&&s.props.userDetails.authorizePurchase){var t=s.props.sparePartDetailsByItemname(s.state.itemName),a=s.state,l=s.calcAverageUnitCost(t,s.state),r=Object(c.a)(Object(c.a)({},t),{},{quantity:parseInt(t.quantity)+parseInt(s.state.quantity),averageUnitCost:l});E.a.post("http://localhost:5000/purchaseHistory/add",a).then((function(e){200===e.status&&E.a.post("http://localhost:5000/spareParts/update/"+t._id,r).then((function(e){console.log(e.data),200===e.status&&(s.props.loadAllSpareParts(),document.getElementById("cancelPurchaseModal").click(),s.props.setMessage("success","Spare Part Purchase Recorded"),setTimeout(s.props.clearMessage,5e3))}))}))}else if(s.props.userDetails.recordPurchase){var n=s.state;E.a.post("http://localhost:5000/purchaseHistory/add",n).then((function(e){200===e.status&&(console.log(e.data),s.props.loadUnAuthorizedPurchases(),document.getElementById("cancelPurchaseModal").click(),s.props.setMessage("success","Spare Part Purchase Recorded"))}))}}else s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},s.requiredFieldsAreFilled=function(){var e=!0;return(""===s.state.itemName||""===s.state.quantity||""===s.state.cost||""===s.state.date)&&(e=!1),e},s.unfilledRequiredInputs=function(){var e=[];return""===s.state.itemName&&e.push("itemName"),""===s.state.quantity&&e.push("quantity"),""===s.state.cost&&e.push("cost"),""===s.state.date&&e.push("date"),e},s.state={itemName:"",quantity:"",cost:"",supplier:"",date:"",invoiceNumber:"",authorized:s.props.userDetails.authorizePurchase},s}return Object(m.a)(a,[{key:"itemNamesOptions",value:function(){var e=this.props.allItemNames;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:""},"Select a Spare Part"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))}},{key:"render",value:function(){return l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title text-secondary",id:"exampleModalLabel"},"Spare Parts Purchases"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closePurchaseModal},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"bg-white p-0"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"itemName",className:"col-md-4 col-form-label col-form-label-sm"},"Item Name ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("select",{className:"form-control form-control-sm",id:"itemName",onChange:this.handleChange,value:this.state.itemName},this.itemNamesOptions()))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"quantity",className:"col-md-4 col-form-label col-form-label-sm"},"Quantity ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm",id:"quantity",onChange:this.handleChange,value:this.state.quantity}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"cost",className:"col-md-4 col-form-label col-form-label-sm"},"Cost (1 unit) ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-4 pr-0"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm",id:"cost",onChange:this.handleChange,value:this.state.cost}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"supplier",className:"col-md-4 col-form-label col-form-label-sm"},"Supplier"),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"supplier",onChange:this.handleChange,value:this.state.supplier}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"datePurchased",className:"col-md-4 col-form-label col-form-label-sm"},"Date ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{type:"date",className:"form-control form-control-sm",id:"date",onChange:this.handleChange,value:this.state.date}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"invoiceNumber",className:"col-md-4 col-form-label col-form-label-sm"},"Invoice Number"),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"invoiceNumber",onChange:this.handleChange,value:this.state.invoiceNumber}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success float-right mr-2",onClick:this.handleSubmit,value:"Save"}),l.a.createElement("a",{className:"btn btn-sm btn-secondary text-white float-right mr-2",id:"cancelPurchaseModal","data-dismiss":"modal",onClick:this.props.closePurchaseModal},"Cancel")))))}}]),a}(l.a.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).handleChange=function(e){if(e.target.id.includes("itemName")){var t=r.state.items;t.map((function(a){a.id==e.target.id.substr(-1)&&(a["itemName"+a.id]=e.target.value,r.setState({items:t}),document.getElementById("itemName"+a.id).classList.remove("border-danger"))}))}else if(e.target.id.includes("quantity")){var a=r.state.items;a.map((function(t){t.id==e.target.id.substr(-1)&&(t["quantity"+t.id]=e.target.value,r.setState({items:a}),document.getElementById("quantity"+t.id).classList.remove("border-danger"))}))}else r.setState(Object(g.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("border-danger")},r.handleSubmit=function(e){e.preventDefault(),r.itemAndQtyAreSpecified();var t=0;r.requiredFieldsAreFilled()&&r.itemAndQtyAreSpecified()?r.arrayOfUsage().map((function(e){var a=r.props.sparePartDetailsByItemname(e.itemName),s=Object(c.a)(Object(c.a)({},a),{},{quantity:parseInt(a.quantity)-parseInt(e.quantity)});r.props.userDetails.requestUsage&&r.props.userDetails.authorizeUsage?E.a.post("http://localhost:5000/spareParts/update/"+s._id,s).then((function(a){console.log(a.data),E.a.post("http://localhost:5000/usageHistory/add",e).then((function(e){console.log(e.data),r.props.loadAllSpareParts(),r.props.loadUnAuthorizedUsage(),t+=1,r.arrayOfUsage().length===t&&document.getElementById("cancelUseItemsModal").click()}))})):r.props.userDetails.requestUsage&&E.a.post("http://localhost:5000/usageHistory/add",e).then((function(e){console.log(e.data),r.props.loadAllSpareParts(),r.props.loadUnAuthorizedUsage(),t+=1,r.arrayOfUsage().length===t&&document.getElementById("cancelUseItemsModal").click()}))})):r.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},r.arrayOfUsage=function(){var e=r.state,t=[];return e.items.map((function(a){t.push({itemName:a["itemName"+a.id],quantity:a["quantity"+a.id],vehicleFor:e.vehicleFor,authorizedBy:e.authorizedBy,date:e.date,purpose:e.purpose,authorized:e.authorized})})),t},r.requiredFieldsAreFilled=function(){var e=!1;return 0===r.unfilledRequiredInputs().length&&(e=!0),e},r.unfilledRequiredInputs=function(){var e=[];return""===r.state.vehicleFor&&e.push("vehicleFor"),""===r.state.date&&e.push("date"),e},r.itemAndQtyAreSpecified=function(){var e="";return r.state.items.map((function(t){""!==t["itemName"+t.id]&&""!==t["quantity"+t.id]?e+="true":(e+="false",""===t["itemName"+t.id]&&document.getElementById("itemName"+t.id).classList.add("border-danger"),""===t["quantity"+t.id]&&document.getElementById("quantity"+t.id).classList.add("border-danger"))})),!e.includes("false")},r.itemNamesOptions=function(){var e=r.props.allItemNames;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:"",key:"placeholder"},"Select a Spare Part"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))},r.vehiclesOptions=function(){var e=r.props.allVehicles;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:"",key:"placeholder"},"Select a Vehicle"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))},r.listOfItems=function(){return r.state.items.map((function(e){return l.a.createElement(s.Fragment,{key:"itemName"+e.id},l.a.createElement("div",{className:"col-md-8 pr-0 pb-2"},l.a.createElement("select",{className:"form-control form-control-sm",id:"itemName"+e.id,onChange:r.handleChange,value:r.state.items[e.id-1]["itemName"+e.id]},r.itemNamesOptions())),l.a.createElement("div",{className:"col-md-4 pl-1 pb-2"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm",placeholder:"quantity",id:"quantity"+e.id,value:r.state.items[e.id-1]["quantity"+e.id],onChange:r.handleChange})))}))},r.addToListOfItems=function(){var e,t=r.state.items;t.push((e={},Object(g.a)(e,"itemName"+(t.length+1),""),Object(g.a)(e,"quantity"+(t.length+1),""),Object(g.a)(e,"id",t.length+1),e)),r.setState({items:t})},r.closeButton=function(){if(r.state.items.length>1)return l.a.createElement("a",{className:"btn btn-sm close mt-auto mb-2 p-0",onClick:function(){var e=r.state.items;e.pop(),r.setState({items:e})}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))},r.state={items:[{itemName1:"",quantity1:"",id:1}],vehicleFor:"",authorizedBy:"",date:"",purpose:"",authorized:r.props.userDetails.authorizeUsage,returnedDatabaseCalls:0},r}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title text-secondary",id:"exampleModalLabel"},"Spare Parts Usage"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeUsageModal},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"bg-white p-0"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"itemName1",className:"col-md-3 col-form-label col-form-label-sm"},"Items ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-8"},l.a.createElement("div",{className:"row"},this.listOfItems())),l.a.createElement("div",{className:"d-flex flex-column col-md-1 pl-0 "},l.a.createElement("a",{className:"btn btn-sm btn-outline-success",onClick:function(){e.addToListOfItems()}},"+"),this.closeButton())),l.a.createElement("div",{className:"dropdown-divider mt-0"}),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"vehicleFor",className:"col-md-3 col-form-label col-form-label-sm"},"Vehicle For ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("select",{className:"form-control form-control-sm",id:"vehicleFor",onChange:this.handleChange,value:this.state.vehicleFor},this.vehiclesOptions()))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"authorizedBy",className:"col-md-3 col-form-label col-form-label-sm"},"Authorized By"),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"authorizedBy",onChange:this.handleChange,value:this.state.authorizedBy}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"date",className:"col-md-3 col-form-label col-form-label-sm"},"Date ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("input",{type:"date",className:"form-control form-control-sm",id:"date",onChange:this.handleChange,value:this.state.date}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"purpose",className:"col-md-3 col-form-label col-form-label-sm"},"Purpose"),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("textarea",{rows:"3",className:"form-control w-100 rounded",id:"purpose",onChange:this.handleChange,value:this.state.purpose}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success float-right mr-2","data-dismiss":"modal",onClick:this.handleSubmit,value:"Save"}),l.a.createElement("a",{className:"btn btn-sm btn-secondary text-white float-right mr-2",id:"cancelUseItemsModal",onClick:this.props.closeUsageModal,"data-dismiss":"modal"},"Cancel")))))}}]),a}(l.a.Component);function J(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("th",{scope:"row"},e.SN),l.a.createElement("td",null,l.a.createElement(p.b,{to:"sparepartdetails/"+e.id,className:"text-dark"},e.itemName)),l.a.createElement("td",null,e.category),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.averageUnitCost))}var K=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).sortTableItems=function(){var e=[];s.props.allSpareParts.map((function(t){e.push(t.itemName)}));var t=e.sort(),a=[];return t.map((function(e){s.props.allSpareParts.map((function(t){e===t.itemName&&a.push(t)}))})),a},s.allTableRows=function(){return s.props.userDetails.viewInventoryRecords?s.sortTableItems().map((function(e){return l.a.createElement("tr",{key:e._id},l.a.createElement(J,{id:e._id,SN:s.sortTableItems().indexOf(e)+1,itemName:e.itemName,category:e.category,quantity:parseInt(e.quantity),averageUnitCost:e.averageUnitCost}))})):l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",{className:"text-danger h6"}," You need permission to view this data"))},s.purchaseModal=function(){if(s.state.showPurchaseModal)return l.a.createElement(Q,{userDetails:s.props.userDetails,allItemNames:s.props.allItemNames(),closePurchaseModal:s.closePurchaseModal,sparePartDetailsByItemname:s.props.sparePartDetailsByItemname,loadAllSpareParts:s.props.loadAllSpareParts,loadUnAuthorizedPurchases:s.props.loadUnAuthorizedPurchases,setMessage:s.props.setMessage,clearMessage:s.props.clearMessage})},s.openPurchaseModal=function(){s.setState({showPurchaseModal:!0}),s.props.setActiveModal("cancelPurchaseModal")},s.closePurchaseModal=function(){s.setState({showPurchaseModal:!1}),s.props.resetActiveModal()},s.usageModal=function(){if(s.state.showUsageModal)return l.a.createElement(G,{userDetails:s.props.userDetails,allItemNames:s.props.allItemNames(),closeUsageModal:s.closeUsageModal,allVehicles:s.props.allVehicles(),sparePartDetailsByItemname:s.props.sparePartDetailsByItemname,loadAllSpareParts:s.props.loadAllSpareParts,updateSparePartDetails:s.props.updateSparePartDetails,loadUnAuthorizedUsage:s.props.loadUnAuthorizedUsage,setMessage:s.props.setMessage,clearMessage:s.props.clearMessage})},s.openUsageModal=function(){s.setState({showUsageModal:!0}),s.props.setActiveModal("cancelUseItemsModal")},s.closeUsageModal=function(){s.setState({showUsageModal:!1}),s.props.resetActiveModal()},s.newSparePartBtn=function(){if(s.props.userDetails.addNewSparePart)return l.a.createElement(p.b,{to:"/newSparePart",className:"btn btn-sm btn-outline-secondary mr-2"},"New Spare Part")},s.purchaseModalBtn=function(){if(s.props.userDetails.recordPurchase)return l.a.createElement("button",{className:"btn btn-sm btn-outline-success mr-2","data-toggle":"modal","data-target":"#purchaseModal",onClick:s.openPurchaseModal},"Purchase")},s.usageModalBtn=function(){if(s.props.userDetails.requestUsage)return l.a.createElement("button",{className:"btn btn-sm btn-outline-danger mr-2","data-toggle":"modal","data-target":"#UsageModal",onClick:s.openUsageModal},"Usage")},s.state={showPurchaseModal:!1,showUsageModal:!1},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"col px-4"},l.a.createElement("header",{className:"clearfix"},l.a.createElement("h4",{className:"float-left text-secondary pl-1"},"Spare Part Inventory"),l.a.createElement("span",{className:"d-none d-md-inline float-right"},this.newSparePartBtn(),this.purchaseModalBtn(),this.usageModalBtn()),l.a.createElement("span",{className:"d-block d-md-none float-right mr-1"},l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Actions"),l.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},l.a.createElement("button",{className:"dropdown-item",type:"button"},"Reorder Item"),l.a.createElement("button",{className:"dropdown-item",type:"button"},"Add New Item"),l.a.createElement("button",{className:"dropdown-item",type:"button"},"Give Out Item"))))),l.a.createElement("table",{className:"table rounded bg-white"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col",style:{minWidth:"250px"}},"Item Name"),l.a.createElement("th",{scope:"col"},"Category"),l.a.createElement("th",{scope:"col"},"On Hand"),l.a.createElement("th",{scope:"col"},"Av. Unit Cost"))),l.a.createElement("tbody",null,this.allTableRows())),l.a.createElement("div",{className:"modal",id:"purchaseModal",tabIndex:"-1",role:"dialog","aria-labelledby":"purchaseModalLabel","aria-hidden":"true","data-backdrop":"static","data-keyboard":"false"},this.purchaseModal()),l.a.createElement("div",{className:"modal",id:"UsageModal",tabIndex:"-1",role:"dialog","aria-labelledby":"UsageModalLabel","aria-hidden":"true","data-backdrop":"static","data-keyboard":"false"},this.usageModal()))}}]),a}(l.a.Component),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){E.a.get("http://localhost:5000/spareParts/categories").then((function(e){s.setState({categoryOptions:e.data})}))},s.handleChange=function(e){var t=s.state.newSparePart;"category"===e.target.id||"newCategory"===e.target.id?""===document.getElementById("newCategory").value?(t.category=document.getElementById("category").value,s.setState({newSparePart:t})):(t.category=document.getElementById("newCategory").value,s.setState({newSparePart:t})):(t[e.target.id]=e.target.value,s.setState({newSparePart:t}),document.getElementById(e.target.id).classList.remove("border-danger"))},s.handleSubmit=function(e){e.preventDefault(),s.requiredFieldsAreFilled()?!1===s.props.doesNewSparePartExist(s.state.newSparePart.itemName)?E.a.post("http://localhost:5000/spareParts/add",s.state.newSparePart).then((function(e){200===e.status&&(s.props.loadAllSpareParts(),s.props.setMessage("success","New Spare Part Added"),setTimeout(s.props.clearMessage,5e3))})):(s.props.setMessage("danger","Sparepart Already Exists"),setTimeout(s.props.clearMessage,5e3)):s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},s.requiredFieldsAreFilled=function(){var e=!0;return(""===document.getElementById("itemName").value||""===document.getElementById("quantity").value||""===document.getElementById("reorderlevel").value||""===document.getElementById("averageUnitCost").value)&&(e=!1),e},s.unfilledRequiredInputs=function(){var e=[];return""===document.getElementById("itemName").value&&e.push("itemName"),""===document.getElementById("quantity").value&&e.push("quantity"),""===document.getElementById("reorderlevel").value&&e.push("reorderlevel"),""===document.getElementById("averageUnitCost").value&&e.push("averageUnitCost"),e},s.state={newSparePart:{itemName:"",category:"",manufacturer:"",partNumber:"",model:"",serialNumber:"",quantity:0,reorderlevel:0,averageUnitCost:0,description:""},categoryOptions:[]},s}return Object(m.a)(a,[{key:"categoryOptions",value:function(){var e=this.state.categoryOptions;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:null},"Select a category"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))}},{key:"render",value:function(){return this.props.userDetails.addNewSparePart?l.a.createElement("div",{className:"col px-4"},l.a.createElement("header",{className:"clearfix"},l.a.createElement("h4",{className:"text-secondary d-inline-block float-left pl-1"},"Add New Spare Part")),l.a.createElement("section",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{className:"bg-white"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"itemName",className:"col-sm-2 col-form-label col-form-label-sm"},"Item Name ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",required:!0,className:"form-control form-control-sm",id:"itemName",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"category",className:"col-sm-2 col-form-label col-form-label-sm"},"Category"),l.a.createElement("div",{className:"col-sm-3"},l.a.createElement("select",{className:"form-control form-control-sm",id:"category",onChange:this.handleChange},this.categoryOptions())),l.a.createElement("div",{className:"col-sm-3"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"newCategory",onChange:this.handleChange,placeholder:"New Category"}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"manufacturer",className:"col-sm-2 col-form-label col-form-label-sm"},"Manufacturer"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"manufacturer",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"partNumber",className:"col-sm-2 col-form-label col-form-label-sm"},"Part Number"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"partNumber",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"model",className:"col-sm-2 col-form-label col-form-label-sm"},"Model"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"model",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"serialNumber",className:"col-sm-2 col-form-label col-form-label-sm"},"Serial Number"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"serialNumber",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"quantity",className:"col-sm-2 col-form-label col-form-label-sm"},"Quantity ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{type:"number",required:!0,className:"form-control form-control-sm",id:"quantity",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"reorderlevel",className:"col-sm-2 col-form-label col-form-label-sm"},"Reorder Level",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{type:"number",required:!0,className:"form-control form-control-sm",id:"reorderlevel",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"initialCost",className:"col-sm-2 col-form-label col-form-label-sm"},"Cost",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{type:"text",required:!0,className:"form-control form-control-sm",id:"averageUnitCost",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"colFormLabelSm",className:"col-sm-2 col-form-label col-form-label-sm"},"Description"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("textarea",{rows:"3",className:"form-control w-100 rounded",id:"description",onChange:this.handleChange}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success mr-2",value:"Save",onClick:this.handleSubmit}))))):l.a.createElement("h5",{className:"text-danger"}," You need Permission to view this Page")}}]),a}(l.a.Component),Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){"category"===e.target.id||"newCategory"===e.target.id?""===document.getElementById("newCategory").value?s.setState({category:document.getElementById("category").value}):s.setState({category:document.getElementById("newCategory").value}):(s.setState(Object(g.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("border-danger"))},s.handleSubmit=function(e){e.preventDefault(),s.requiredFieldsAreFilled()?!1===s.props.doesSparePartExist(s.state.itemName)||s.state.itemName.toLowerCase().trim()===s.props.itemName.toLowerCase().trim()?(document.getElementById("itemnameErrorMessage").textContent="",E.a.post("http://localhost:5000/spareParts/update/"+s.state._id,s.state).then((function(e){200===e.status&&(s.props.loadAllSpareParts(),document.getElementById("cancelEditItemForm").click(),s.props.setMessage("success","Spare Part Updated"),setTimeout(s.props.clearMessage,5e3))}))):(document.getElementById("itemnameErrorMessage").textContent="Spare Part Already Exists",document.getElementById("itemName").classList.add("border-danger")):s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},s.requiredFieldsAreFilled=function(){var e=!0;return(""===document.getElementById("itemName").value||""===document.getElementById("reorderlevel").value)&&(e=!1),e},s.unfilledRequiredInputs=function(){var e=[];return""===document.getElementById("itemName").value&&e.push("itemName"),""===document.getElementById("reorderlevel").value&&e.push("reorderlevel"),e},s.categoryOptions=function(){var e=s.props.allCategories;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:null},"Select a category"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))},s.state={_id:s.props._id,itemName:s.props.itemName,category:s.props.category,manufacturer:s.props.manufacturer,partNumber:s.props.partNumber,model:s.props.model,serialNumber:s.props.serialNumber,reorderlevel:s.props.reorderlevel,description:s.props.description,quantity:s.props.quantity,averageUnitCost:s.props.averageUnitCost},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title text-secondary",id:"exampleModalLabel"},"Edit ",this.props.itemName),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"bg-white"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"itemName",className:"col-sm-4 col-form-label col-form-label-sm"},"Item Name"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("small",{className:"d-block text-danger",id:"itemnameErrorMessage"}),l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"itemName",defaultValue:this.state.itemName,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-4 col-form-label col-form-label-sm"},"Category"),l.a.createElement("div",{className:"col-sm-4 pr-0"},l.a.createElement("select",{className:"form-control form-control-sm",id:"category",defaultValue:this.props.category,onChange:this.handleChange},this.categoryOptions())),l.a.createElement("div",{className:"col-sm-4 pl-0"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"newCategory",placeholder:"New Category",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"manufacturer",className:"col-sm-4 col-form-label col-form-label-sm"},"Manufacturer"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"manufacturer",defaultValue:this.state.manufacturer,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"partNumber",className:"col-sm-4 col-form-label col-form-label-sm"},"Part Number"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"partNumber",defaultValue:this.state.partNumber,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"model",className:"col-sm-4 col-form-label col-form-label-sm"},"Model"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"model",defaultValue:this.state.model,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"serialNumber",className:"col-sm-4 col-form-label col-form-label-sm"},"Serial Number"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"serialNumber",defaultValue:this.state.serialNumber,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"reorderlevel",className:"col-sm-4 col-form-label col-form-label-sm"},"Reorder Level"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm",id:"reorderlevel",defaultValue:this.state.reorderlevel,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"colFormLabelSm",className:"col-sm-4 col-form-label col-form-label-sm"},"Description"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("textarea",{rows:"3",className:"w-100 rounded",defaultValue:this.props.description,id:"description",onChange:this.handleChange}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success float-right",onClick:this.handleSubmit,value:"Save"}),l.a.createElement("a",{className:"btn btn-sm btn-secondary text-white float-right mr-2",id:"cancelEditItemForm","data-dismiss":"modal",onClick:this.props.closeModal},"Discard")))))}}]),a}(l.a.Component),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){var e=window.location.href,t=e.substr(e.length-24,e.length).toString();E.a.get("http://localhost:5000/purchaseHistory/findMonth/"+s.props.sparePartDetails(t).itemName).then((function(e){200===e.status&&s.setState({thisMonthPurchaseHistory:e.data})})),E.a.get("http://localhost:5000/usageHistory/findMonth/"+s.props.sparePartDetails(t).itemName).then((function(e){200===e.status&&s.setState({thisMonthUsageHistory:e.data})}))},s.returnValue=function(e){return""===e?"Not Specified":e},s.openModal=function(){s.setState({modalOpen:!0}),s.props.setActiveModal("cancelEditItemForm")},s.closeModal=function(){s.setState({modalOpen:!1}),s.props.resetActiveModal()},s.modal=function(){var e=window.location.href,t=e.substr(e.length-24,e.length).toString();if(s.state.modalOpen)return l.a.createElement(Z,{_id:s.props.sparePartDetails(t)._id,itemName:s.props.sparePartDetails(t).itemName,category:s.props.sparePartDetails(t).category,manufacturer:s.props.sparePartDetails(t).manufacturer,partNumber:s.props.sparePartDetails(t).partNumber,model:s.props.sparePartDetails(t).model,serialNumber:s.props.sparePartDetails(t).serialNumber,reorderlevel:s.props.sparePartDetails(t).reorderlevel,description:s.props.sparePartDetails(t).description,quantity:s.props.sparePartDetails(t).quantity,averageUnitCost:s.props.sparePartDetails(t).averageUnitCost,doesSparePartExist:s.props.doesSparePartExist,loadAllSpareParts:s.props.loadAllSpareParts,closeModal:s.closeModal,onSubmit:s.props.updateSparePartDetails,allCategories:s.props.allCategories,setMessage:s.props.setMessage,clearMessage:s.props.clearMessage})},s.numberPurchased=function(){var e=0;return s.state.thisMonthPurchaseHistory.map((function(t){e+=t.quantity})),e},s.numberUsed=function(){var e=0;return s.state.thisMonthUsageHistory.map((function(t){e+=t.quantity})),e},s.state={modalOpen:!1,thisMonthPurchaseHistory:[],thisMonthUsageHistory:[]},s}return Object(m.a)(a,[{key:"render",value:function(){var e=window.location.href,t=e.substr(e.length-24,e.length).toString();return l.a.createElement("div",{className:"col px-4"},l.a.createElement("section",{className:"card"},l.a.createElement("header",{className:"card-header bg-white clearfix"},l.a.createElement("h5",{className:"d-inline-block text-secondary mb-0"},"Details For ",l.a.createElement("span",{className:"text-info"},this.props.sparePartDetails(t).itemName))),l.a.createElement("div",{className:"card-body clearfix"},l.a.createElement("div",{className:"row mb-0"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Spare Part Name"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).itemName)),l.a.createElement("span",{className:"col-sm-4"},l.a.createElement("button",{className:"btn btn-sm btn-outline-secondary float-right","data-toggle":"modal","data-target":"#editSparePart",onClick:this.openModal},"Edit"))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Part Number"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).partNumber))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Manufacturer"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).manufacturer))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Model"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).model))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Serial Number"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).serialNumber))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Category"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).category))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"On Hand"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).quantity))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Reorder Level"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).reorderlevel))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Average Unit Cost"),l.a.createElement("span",{className:"col-sm-6"},"\u20a6 ",this.returnValue(this.props.sparePartDetails(t).averageUnitCost))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Created On"),l.a.createElement("span",{className:"col-sm-6"},this.props.sparePartDetails(t).createdAt.toString().substr(0,10))),l.a.createElement("div",{className:"row mb-2"},l.a.createElement("span",{className:"col-sm-2 text-secondary"},"Description"),l.a.createElement("span",{className:"col-sm-6"},this.returnValue(this.props.sparePartDetails(t).description)))),l.a.createElement("div",{className:"card-footer"},l.a.createElement("header",{className:"clearfix"},l.a.createElement("h6",{className:"text-secondary d-inline-block"},"Statistics For ",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(new Date).getMonth()]," ",(new Date).getFullYear()," "),l.a.createElement("button",{className:"btn btn-link float-right py-0 text-secondary"},l.a.createElement(p.b,{to:"/itemHistory/"+this.props.sparePartDetails(t).itemName},"View History "))),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("table",{className:"table table-borderless"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"text-center lead text-info"},this.numberPurchased()),l.a.createElement("td",{className:"text-center lead text-info"},this.numberUsed()),l.a.createElement("td",{className:"text-center lead text-info"},this.props.sparePartDetails(t).quantity),l.a.createElement("td",{className:"text-center lead text-info"},"\u20a6 ",100*Math.ceil(this.numberPurchased()*this.props.sparePartDetails(t).averageUnitCost/100)),l.a.createElement("td",{className:"text-center lead text-info"},"\u20a6 ",100*Math.ceil(this.numberUsed()*this.props.sparePartDetails(t).averageUnitCost/100)),l.a.createElement("td",{className:"text-center lead text-info"},"\u20a6 ",100*Math.ceil(this.props.sparePartDetails(t).quantity*this.props.sparePartDetails(t).averageUnitCost/100))),l.a.createElement("tr",null,l.a.createElement("th",{className:"text-center py-0 border-right",scope:"col"},"Number Purchased"),l.a.createElement("th",{className:"text-center py-0 border-right",scope:"col"},"Number Used"),l.a.createElement("th",{className:"text-center py-0 border-right",scope:"col"},"Number On Hand"),l.a.createElement("th",{className:"text-center py-0 border-right",scope:"col"},"Value Purchases"),l.a.createElement("th",{className:"text-center py-0 border-right",scope:"col"},"Value Used"),l.a.createElement("th",{className:"text-center py-0 ",scope:"col"},"Value On Hand"))))),l.a.createElement("div",{className:"modal",id:"editSparePart",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","data-backdrop":"static","data-keyboard":"false"},this.modal())))}}]),a}(l.a.Component),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("border-danger")},s.handleSubmit=function(e){e.preventDefault(),s.requiredFieldsAreFilled()?E.a.post("http://localhost:5000/vehicles/add",s.state).then((function(e){200===e.status&&(s.props.loadAllVehicles(),s.props.closeNewVehicleModal())})):s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},s.requiredFieldsAreFilled=function(){var e=!0;return""===document.getElementById("plateNumber").value&&(e=!1),e},s.unfilledRequiredInputs=function(){var e=[];return""===document.getElementById("plateNumber").value&&e.push("plateNumber"),e},s.state={plateNumber:"",description:""},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title text-secondary",id:"exampleModalLabel"},"Add New Vehicle"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",id:"closeNewVehicleModal",onClick:this.props.closeNewVehicleModal},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"bg-white clearfix"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"plateNumber",className:"col-sm-4 col-form-label col-form-label-sm"},"Plate Number ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("input",{type:"text",required:!0,className:"form-control form-control-sm",id:"plateNumber",onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"colFormLabelSm",className:"col-sm-4 col-form-label col-form-label-sm"},"Description"),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("textarea",{rows:"3",className:"form-control w-100 rounded",id:"description",onChange:this.handleChange}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success mr-2 float-right","data-dismiss":"modal",value:"Save",onClick:this.handleSubmit})))))}}]),a}(l.a.Component),te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value))},s.handleSubmit=function(e){e.preventDefault(),console.log(s.props.id),E.a.post("http://localhost:5000/vehicles/update/"+s.props.id,s.state).then((function(e){200===e.status&&(s.props.loadAllVehicles(),s.props.closeEditVehicleModal())}))},s.state={id:s.props.id,plateNumber:s.props.plateNumber,description:s.props.description},s}return Object(m.a)(a,[{key:"render",value:function(){var e;return l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title text-secondary",id:"exampleModalLabel"},"Edit Vehicle"),l.a.createElement("button",(e={type:"button",id:"closeEditVehicleModal",className:"close"},Object(g.a)(e,"id","closeEditVehicleModal"),Object(g.a)(e,"data-dismiss","modal"),Object(g.a)(e,"aria-label","Close"),Object(g.a)(e,"onClick",this.props.closeEditVehicleModal),e),l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"bg-white p-0"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"number",className:"col-md-3 pr-0 col-form-label col-form-label-sm"},"Plate Number ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"plateNumber",onChange:this.handleChange,defaultValue:this.props.plateNumber}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"description",className:"col-md-3 pr-0 col-form-label col-form-label-sm"},"Description"),l.a.createElement("div",{className:"col-md-9"},l.a.createElement("textarea",{className:"form-control",id:"description",onChange:this.handleChange,defaultValue:this.props.description}))),l.a.createElement("input",{type:"submit",className:"btn btn-sm btn-success float-right","data-dismiss":"modal",onClick:this.handleSubmit,value:"Submit"})))))}}]),a}(l.a.Component),ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).editVehicle=function(){if(e.props.userDetails.editVehicle)return l.a.createElement("button",{className:"btn btn-sm btn-outline-secondary p-1",onClick:function(){e.props.openEditVehicleModal(),e.props.setCurrentlyEditedVehicle({id:e.props.id,plateNumber:e.props.plateNumber,description:e.props.description})},"data-toggle":"modal","data-target":"#EditVehicleModal"},"Edit")},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"card p-3 my-2 clearfix"},l.a.createElement("div",{className:"row mb-0"},l.a.createElement("div",{className:"col-10 mb-0"},l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:"col-sm-3 text-secondary"},"Plate Number"),l.a.createElement("span",{className:"col-sm text-dark"},this.props.plateNumber))),l.a.createElement("div",{className:"col-2 px-0 px-sm-3 mb-0 text-center text-sm-right"},this.editVehicle()),l.a.createElement("div",{className:"col-12 col-sm-10 mt-2 mt-sm-0 mb-0"},l.a.createElement("div",{className:"row"},l.a.createElement("span",{className:"col-sm-3 text-secondary"},"Description"),l.a.createElement("span",{className:"col-sm"},this.props.description))))))}}]),a}(l.a.Component),se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).setCurrentlyEditedVehicle=function(e){r.setState({currentlyEditedVehicle:e})},r.renderAllVehicles=function(){return l.a.createElement(l.a.Fragment,null,r.props.allVehicles.map((function(e){return l.a.createElement(s.Fragment,{key:e._id},l.a.createElement(ae,{id:e._id,userDetails:r.props.userDetails,plateNumber:e.plateNumber,description:e.description,setCurrentlyEditedVehicle:r.setCurrentlyEditedVehicle,openEditVehicleModal:r.openEditVehicleModal}))})))},r.newVehicleModal=function(){if(r.state.showNewVehicleModal)return l.a.createElement(ee,{closeNewVehicleModal:r.closeNewVehicleModal,loadAllVehicles:r.props.loadAllVehicles})},r.newVehicleBtn=function(){if(r.props.userDetails.addNewVehicle)return l.a.createElement("button",{className:"btn btn-sm btn-outline-success float-right mr-2","data-toggle":"modal","data-target":"#NewVehicleModal",onClick:r.openNewVehicleModal},"Add New vehicle")},r.editVehicleModal=function(){if(r.state.showEditVehicleModal)return l.a.createElement(te,{id:r.state.currentlyEditedVehicle.id,plateNumber:r.state.currentlyEditedVehicle.plateNumber,description:r.state.currentlyEditedVehicle.description,closeEditVehicleModal:r.closeEditVehicleModal,loadAllVehicles:r.props.loadAllVehicles})},r.openNewVehicleModal=function(){r.setState({showNewVehicleModal:!0}),r.props.setActiveModal("closeNewVehicleModal")},r.closeNewVehicleModal=function(){r.setState({showNewVehicleModal:!1}),r.props.resetActiveModal()},r.openEditVehicleModal=function(){r.setState({showEditVehicleModal:!0}),r.props.setActiveModal("closeEditVehicleModal")},r.closeEditVehicleModal=function(){r.setState({showEditVehicleModal:!1}),r.props.resetActiveModal()},r.state={showNewVehicleModal:!1,showEditVehicleModal:!1,currentlyEditedVehicle:{id:"",plateNumber:"",description:""}},r}return Object(m.a)(a,[{key:"render",value:function(){return this.props.userDetails.viewAllVehicles?l.a.createElement("div",{className:"col px-4"},l.a.createElement("section",{className:"card border-0"},l.a.createElement("header",{className:"clearfix card-header bg-transparent py-0"},l.a.createElement("h4",{className:"float-left text-secondary pl-1"},"All Vehicles"),this.newVehicleBtn()),l.a.createElement("div",{className:"card-body p-1 p-lg-3 clearfix"},this.renderAllVehicles()),l.a.createElement("div",{className:"modal",id:"NewVehicleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","data-backdrop":"static","data-keyboard":"false"},this.newVehicleModal()),l.a.createElement("div",{className:"modal",id:"EditVehicleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","data-backdrop":"static","data-keyboard":"false"},this.editVehicleModal()))):l.a.createElement("div",{className:"col px-4"},l.a.createElement("h5",{className:"text-danger"}," You need permission to view this page"))}}]),a}(l.a.Component),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value)),document.getElementById(e.target.id).classList.remove("border-danger")},s.calcAverageUnitCost=function(e,t){var a,s,l,r;a=parseInt(e.averageUnitCost),s=parseInt(e.quantity),l=parseInt(t.cost),r=parseInt(t.quantity),console.log(a),console.log(l);var n=(a*s+l*r)/(s+r);return 100*Math.ceil(n/100)},s.handleSubmit=function(e){e.preventDefault();var t=s.props.sparePartDetailsByItemname(s.state.itemName),a={itemName:s.state.itemName,quantity:s.state.quantity,cost:s.state.cost,supplier:s.state.supplier,date:s.state.date,invoiceNumber:s.state.invoiceNumber,authorized:!0},l=s.calcAverageUnitCost(t,s.state);console.log(s.state);var r=Object(c.a)(Object(c.a)({},t),{},{quantity:parseInt(t.quantity)+parseInt(s.state.quantity),averageUnitCost:l});s.requiredFieldsAreFilled()?(E.a.get("".concat(v,"/api/purchasehistory/update/").concat(s.props.id),a).then((function(e){console.log(e.data),s.props.loadUnAuthorizedPurchases()})),E.a.get("".concat(v,"/api/sparepart/update/").concat(t._id),r).then((function(e){console.log(e.data),200===e.status&&s.props.loadAllSpareParts()}))):(alert("Fill the required inputs"),s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")})))},s.discardRequest=function(){E.a.delete("".concat(v,"/api/purchasehistory/delete/").concat(s.props.id)).then((function(e){200===e.status&&(console.log(e.data),s.props.loadUnAuthorizedPurchases())}))},s.requiredFieldsAreFilled=function(){var e=!0;return(""===s.state.itemName||""===s.state.quantity||""===s.state.cost||""===s.state.date)&&(e=!1),e},s.unfilledRequiredInputs=function(){var e=[];return""===s.state.itemName&&e.push("itemName"),""===s.state.quantity&&e.push("quantity"),""===s.state.cost&&e.push("cost"),""===s.state.date&&e.push("date"),e},s.itemName=function(){return s.state.edit?l.a.createElement("select",{className:"form-control form-control-sm bg-white",required:!0,readOnly:!0,style:s.border(),id:"itemName",onChange:s.handleChange,value:s.state.itemName},s.itemNamesOptions()):l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:s.border(),required:!0,readOnly:!s.state.edit,id:"itemName",onChange:s.handleChange,value:s.state.itemName})},s.editFields=function(){s.setState({edit:!s.state.edit})},s.border=function(){return s.state.edit?{border:"1px solid black"}:{border:"none"}},s.approvePurchase=function(){if(s.props.userDetails.authorizePurchase)return l.a.createElement("button",{className:"btn btn-success btn-sm mb-2",onClick:s.handleSubmit},"Approve")},s.editPurchase=function(){if(s.props.userDetails.recordPurchase)return l.a.createElement("button",{className:"btn btn-outline-secondary btn-sm mb-2",onClick:s.editFields},"Edit")},s.state={edit:!1,itemName:s.props.itemName,quantity:s.props.quantity,cost:s.props.cost,supplier:s.props.supplier,date:s.props.date,invoiceNumber:s.props.invoiceNumber,authorized:!0},s}return Object(m.a)(a,[{key:"itemNamesOptions",value:function(){var e=this.props.allItemNames;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:""},"Select a Spare Part"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row border rounded mb-3"},l.a.createElement("form",{className:"col-md-10 bg-white p-3"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"itemName",className:"col-md-3 col-form-label col-form-label-sm"},"Item Name ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},this.itemName())),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"quantity",className:"col-md-3 col-form-label col-form-label-sm"},"Quantity ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm bg-white",style:this.border(),required:!0,readOnly:!this.state.edit,id:"quantity",onChange:this.handleChange,value:this.state.quantity}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"cost",className:"col-md-3 col-form-label col-form-label-sm"},"Cost (1 unit) ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm bg-white",style:this.border(),required:!0,readOnly:!this.state.edit,id:"cost",onChange:this.handleChange,value:this.state.cost}))),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("label",{htmlFor:"supplier",className:"col-md-3 col-form-label col-form-label-sm"},"Supplier"),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:this.border(),readOnly:!this.state.edit,id:"supplier",onChange:this.handleChange,value:this.state.supplier}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"datePurchased",className:"col-md-3 col-form-label col-form-label-sm"},"Date ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white border-0",id:"date",required:!0,readOnly:!0,onChange:this.handleChange,value:this.state.date.substring(0,10)}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"invoiceNumber",className:"col-md-3 col-form-label col-form-label-sm"},"Invoice Number"),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:this.border(),readOnly:!this.state.edit,id:"invoiceNumber",onChange:this.handleChange,value:this.state.invoiceNumber})))),l.a.createElement("div",{className:"col-md-2 text-right py-3"},this.editPurchase()," ",l.a.createElement("br",null),this.approvePurchase()," ",l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.discardRequest},"Discard"),l.a.createElement("br",null))))}}]),a}(l.a.Component),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(g.a)({},e.target.id,e.target.value))},s.handleSubmit=function(e){if(e.preventDefault(),s.requiredFieldsAreFilled()){var t=s.props.sparePartDetailsByItemname(s.state.itemName),a=Object(c.a)(Object(c.a)({},t),{},{quantity:parseInt(t.quantity)-parseInt(s.state.quantity)}),l={itemName:s.state.itemName,quantity:s.state.quantity,vehicleFor:s.state.vehicleFor,authorizedBy:s.state.authorizedBy,date:s.state.date,purpose:s.state.purpose,authorized:!0};E.a.post("".concat(v,"/api/spareparts/update/").concat(a._id),a).then((function(e){console.log(e.data),200===e.status&&s.props.loadAllSpareParts()})),E.a.post("".concat(v,"/api/usagehistory/update/").concat(s.props.id),l).then((function(e){console.log(e.data),200===e.status&&s.props.loadUnAuthorizedUsage()}))}else s.unfilledRequiredInputs().map((function(e){document.getElementById(e).classList.add("border-danger")}))},s.discardRequest=function(){E.a.delete("".concat(v,"/api/usagehistory/delete/").concat(s.props.id)).then((function(e){200===e.status&&(console.log(e.data),s.props.loadUnAuthorizedUsage())}))},s.requiredFieldsAreFilled=function(){var e=!1;return 0===s.unfilledRequiredInputs().length&&(e=!0),e},s.unfilledRequiredInputs=function(){var e=[];return""===s.state.itemName&&e.push("itemName"),""===s.state.quantity&&e.push("quantity"),""===s.state.vehicleFor&&e.push("vehicleFor"),""===s.state.date&&e.push("date"),e},s.itemName=function(){return s.state.edit?l.a.createElement("select",{className:"form-control form-control-sm bg-white",required:!0,style:s.border(),id:"itemName",onChange:s.handleChange,value:s.state.itemName},s.itemNamesOptions()):l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:s.border(),required:!0,readOnly:!0,id:"itemName",onChange:s.handleChange,value:s.state.itemName})},s.vehicleFor=function(){return s.state.edit?l.a.createElement("select",{className:"form-control form-control-sm bg-white",required:!0,style:s.border(),id:"vehicleFor",onChange:s.handleChange,value:s.state.vehicleFor},s.vehiclesOptions()):l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:s.border(),required:!0,readOnly:!0,id:"vehicleFor",onChange:s.handleChange,value:s.state.vehicleFor})},s.editFields=function(){s.setState({edit:!s.state.edit})},s.border=function(){return s.state.edit?{border:"1px solid black"}:{border:"none"}},s.approveUsage=function(){if(s.props.userDetails.authorizeUsage)return l.a.createElement("button",{className:"btn btn-success btn-sm mb-2",onClick:s.handleSubmit},"Approve")},s.state={edit:!1,itemName:s.props.itemName,quantity:s.props.quantity,vehicleFor:s.props.vehicleFor,authorizedBy:s.props.authorizedBy,date:s.props.date,purpose:s.props.purpose,authorized:!0},s}return Object(m.a)(a,[{key:"itemNamesOptions",value:function(){var e=this.props.allItemNames;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:"",key:"placeholder"},"Select a Spare Part"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))}},{key:"vehiclesOptions",value:function(){var e=this.props.allVehicles;return l.a.createElement(l.a.Fragment,null,l.a.createElement("option",{value:"",key:"placeholder"},"Select a Vehicle"),e.map((function(e){return l.a.createElement("option",{key:e,value:e}," ",e)})))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row border rounded mb-3"},l.a.createElement("form",{className:"col-md-10 bg-white p-3"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"itemName",className:"col-md-3 col-form-label col-form-label-sm"},"Item Name ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},this.itemName())),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"quantity",className:"col-md-3 col-form-label col-form-label-sm"},"Quantity ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"number",className:"form-control form-control-sm bg-white",style:this.border(),required:!0,readOnly:!this.state.edit,id:"quantity",onChange:this.handleChange,value:this.state.quantity}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"vehicleFor",className:"col-md-3 col-form-label col-form-label-sm"},"Vehicle For",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},this.vehicleFor())),l.a.createElement("div",{className:"row mb-1"},l.a.createElement("label",{htmlFor:"authorizedBy",className:"col-md-3 col-form-label col-form-label-sm"},"Authorized By"),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:this.border(),readOnly:!this.state.edit,id:"authorizedBy",onChange:this.handleChange,value:this.state.authorizedBy}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"date",className:"col-md-3 col-form-label col-form-label-sm"},"Date ",l.a.createElement("span",{className:"text-warning h5"}," *")),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white border-0",id:"date",required:!0,readOnly:!0,onChange:this.handleChange,value:this.state.date.substring(0,10)}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"purpose",className:"col-md-3 col-form-label col-form-label-sm"},"Purpose"),l.a.createElement("div",{className:"col-md-5"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-white",style:this.border(),readOnly:!this.state.edit,id:"purpose",onChange:this.handleChange,value:this.state.purpose})))),l.a.createElement("div",{className:"col-md-2 text-right py-3"},l.a.createElement("button",{className:"btn btn-outline-secondary btn-sm mb-2",onClick:this.editFields},"Edit"),l.a.createElement("br",null),this.approveUsage()," ",l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.discardRequest},"Discard"),l.a.createElement("br",null))))}}]),a}(l.a.Component),ne=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).purchaseRequests=function(){return e.props.purchaseRequests.map((function(t){return l.a.createElement(s.Fragment,{key:t._id},l.a.createElement(le,{id:t._id,itemName:t.itemName,quantity:t.quantity,cost:t.cost,supplier:t.supplier,date:t.date,invoiceNumber:t.invoiceNumber,authorized:t.authorized,allItemNames:e.props.allItemNames,userDetails:e.props.userDetails,sparePartDetailsByItemname:e.props.sparePartDetailsByItemname,loadUnAuthorizedPurchases:e.props.loadUnAuthorizedPurchases,loadAllSpareParts:e.props.loadAllSpareParts}))}))},e.usageRequests=function(){return e.props.usageRequests.map((function(t){return l.a.createElement(s.Fragment,{key:t._id},l.a.createElement(re,{id:t._id,itemName:t.itemName,quantity:t.quantity,vehicleFor:t.vehicleFor,authorizedBy:t.authorizedBy,date:t.date,purpose:t.purpose,authorized:t.authorized,userDetails:e.props.userDetails,allItemNames:e.props.allItemNames,allVehicles:e.props.allVehicles,sparePartDetailsByItemname:e.props.sparePartDetailsByItemname,loadUnAuthorizedUsage:e.props.loadUnAuthorizedUsage,loadAllSpareParts:e.props.loadAllSpareParts}))}))},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"col px-4"},l.a.createElement("section",{className:"card border-0"},l.a.createElement("div",{className:"card-header p-0 bg-transparent border-0"},l.a.createElement("h5",null,"Purchase Records")),l.a.createElement("div",{className:"card-body px-3"},this.purchaseRequests()),l.a.createElement("div",{className:"border border-secondary dropdown-divider pt-0 mt-0 mb-4"}),l.a.createElement("div",{className:"card-header p-0 bg-transparent border-0"},l.a.createElement("h5",null,"Usage Requests")),l.a.createElement("div",{className:"card-body px-3"},this.usageRequests())))}}]),a}(l.a.Component),oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentWillMount=function(){E.a.get("".concat(v,"/api/purchasehistory/getauthorizedpurchasehistory")).then((function(e){200===e.status&&(s.setState({purchaseHistory:e.data}),console.log(e.data))})),E.a.get("".concat(v,"/api/usagehistory/getauthorizedusagehistory")).then((function(e){200===e.status&&(s.setState({usageHistory:e.data}),console.log(e.data))}))},s.textColor=function(e){return e<0?"text-danger":""},s.renderUsageHistory=function(){return s.state.usageHistory.map((function(e){return l.a.createElement("tr",{key:s.state.usageHistory.indexOf(e)},l.a.createElement("th",{className:s.textColor(e.quantity),scope:"row"},e.date.substring(0,10)),l.a.createElement("td",{className:s.textColor(e.quantity)},e.itemName),l.a.createElement("td",{className:s.textColor(e.quantity)},e.quantity),l.a.createElement("td",{className:s.textColor(e.quantity)},e.vehicleFor),l.a.createElement("td",{className:s.textColor(e.quantity)},e.authorizedBy),l.a.createElement("td",{className:s.textColor(e.quantity)},e.purpose))}))},s.renderPurchaseHistory=function(){return s.state.purchaseHistory.map((function(e){return l.a.createElement("tr",{key:s.state.purchaseHistory.indexOf(e)},l.a.createElement("th",{className:s.textColor(e.quantity),scope:"row"},e.date.substring(0,10)),l.a.createElement("td",{className:s.textColor(e.quantity)},e.itemName),l.a.createElement("td",{className:s.textColor(e.quantity)},e.quantity),l.a.createElement("td",{className:s.textColor(e.quantity)},e.cost),l.a.createElement("td",{className:s.textColor(e.quantity)},e.supplier),l.a.createElement("td",{className:s.textColor(e.quantity)},e.invoiceNumber))}))},s.state={purchaseHistory:[],usageHistory:[]},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("section",{className:"card"},l.a.createElement("header",{className:"card-header bg-white clearfix"},l.a.createElement("h5",{className:"d-inline-block text-secondary mb-0"},"General History")),l.a.createElement("div",{className:"card-body clearfix"},l.a.createElement("ul",{className:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},l.a.createElement("li",{className:"nav-item",role:"presentation"},l.a.createElement("a",{className:"nav-link active",id:"purchase-tab","data-toggle":"pill",href:"#purchase",role:"tab","aria-controls":"purchase","aria-selected":"true"},"Purchase")),l.a.createElement("li",{className:"nav-item",role:"presentation"},l.a.createElement("a",{className:"nav-link",id:"usage-tab","data-toggle":"pill",href:"#usage",role:"tab","aria-controls":"usage","aria-selected":"false"},"Usage"))),l.a.createElement("div",{className:"tab-content",id:"pills-tabContent"},l.a.createElement("div",{className:"tab-pane fade show active",id:"purchase",role:"tabpanel","aria-labelledby":"purchase-tab"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Date (YYYY-MM-DD)"),l.a.createElement("th",{scope:"col"},"Item Name"),l.a.createElement("th",{scope:"col"},"Quantity"),l.a.createElement("th",{scope:"col"},"Cost (1 unit)"),l.a.createElement("th",{scope:"col"},"Supplier"),l.a.createElement("th",{scope:"col"},"Invoice Number"))),l.a.createElement("tbody",null,this.renderPurchaseHistory()))),l.a.createElement("div",{className:"tab-pane fade",id:"usage",role:"tabpanel","aria-labelledby":"usage-tab"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Date (YYYY-MM-DD)"),l.a.createElement("th",{scope:"col"},"Item Name"),l.a.createElement("th",{scope:"col"},"Qty. Used"),l.a.createElement("th",{scope:"col"},"Vehicle For"),l.a.createElement("th",{scope:"col"},"Authorized By"),l.a.createElement("th",{scope:"col"},"Purpose"))),l.a.createElement("tbody",null,this.renderUsageHistory()))))))}}]),a}(l.a.Component),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){var e=s.props.match.params.itemName;E.a.get("".concat(v,"/api/purchasehistory/getitempurchasehistory/").concat(e)).then((function(e){console.log(e.data),200===e.status&&s.setState({purchaseHistory:e.data})})),E.a.get("".concat(v,"/api/usagehistory/getitemusagehistory/").concat(e)).then((function(e){200===e.status&&s.setState({usageHistory:e.data})}))},s.renderUsageHistory=function(){return s.state.usageHistory.map((function(e){return l.a.createElement("tr",{key:s.state.usageHistory.indexOf(e)},l.a.createElement("th",{scope:"row"},e.date.substring(0,10)),l.a.createElement("td",null,e.itemName),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.vehicleFor),l.a.createElement("td",null,e.authorizedBy),l.a.createElement("td",null,e.purpose))}))},s.renderPurchaseHistory=function(){return s.state.purchaseHistory.map((function(e){return l.a.createElement("tr",{key:s.state.purchaseHistory.indexOf(e)},l.a.createElement("th",{scope:"row"},e.date.substring(0,10)),l.a.createElement("td",null,e.itemName),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.cost),l.a.createElement("td",null,e.supplier),l.a.createElement("td",null,e.invoiceNumber))}))},s.state={purchaseHistory:[],usageHistory:[]},s}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("section",{className:"card"},l.a.createElement("header",{className:"card-header bg-white clearfix"},l.a.createElement("h5",{className:"d-inline-block text-secondary mb-0"},"History of ",l.a.createElement("span",{className:"text-info"},this.props.match.params.itemName))),l.a.createElement("div",{className:"card-body clearfix"},l.a.createElement("ul",{className:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},l.a.createElement("li",{className:"nav-item",role:"presentation"},l.a.createElement("a",{className:"nav-link active",id:"purchase-tab","data-toggle":"pill",href:"#purchase",role:"tab","aria-controls":"purchase","aria-selected":"true"},"Purchase")),l.a.createElement("li",{className:"nav-item",role:"presentation"},l.a.createElement("a",{className:"nav-link",id:"usage-tab","data-toggle":"pill",href:"#usage",role:"tab","aria-controls":"usage","aria-selected":"false"},"Usage"))),l.a.createElement("div",{className:"tab-content",id:"pills-tabContent"},l.a.createElement("div",{className:"tab-pane fade show active",id:"purchase",role:"tabpanel","aria-labelledby":"purchase-tab"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Date (YYYY-MM-DD)"),l.a.createElement("th",{scope:"col"},"Item Name"),l.a.createElement("th",{scope:"col"},"Quantity"),l.a.createElement("th",{scope:"col"},"Cost (1 unit)"),l.a.createElement("th",{scope:"col"},"Supplier"),l.a.createElement("th",{scope:"col"},"Invoice Number"))),l.a.createElement("tbody",null,this.renderPurchaseHistory()))),l.a.createElement("div",{className:"tab-pane fade",id:"usage",role:"tabpanel","aria-labelledby":"usage-tab"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Date (YYYY-MM-DD)"),l.a.createElement("th",{scope:"col"},"Item Name"),l.a.createElement("th",{scope:"col"},"Qty. Used"),l.a.createElement("th",{scope:"col"},"Vehicle For"),l.a.createElement("th",{scope:"col"},"Authorized By"),l.a.createElement("th",{scope:"col"},"Purpose"))),l.a.createElement("tbody",null,this.renderUsageHistory()))))))}}]),a}(l.a.Component),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).setActiveModal=function(e){s.setState({openModal:e})},s.resetActiveModal=function(){s.setState({openModal:""})},s.setMessage=function(e,t){var a=s.state.message;a.type=e,a.text=t,s.setState({message:a})},s.clearMessage=function(){var e=s.state.message;e.type="",e.text="",s.setState({message:e})},s.warningMessage=function(){if("warning"===s.state.message.type)return l.a.createElement("div",{className:"d-inline-block alert alert-warning alert-dismissible fade show mx-4 sticky-top",role:"alert"},s.state.message.text,l.a.createElement("button",{type:"button",className:"close h-100","data-dismiss":"alert","aria-label":"Close",onClick:s.clearMessage},l.a.createElement("span",{"aria-hidden":"true",style:{position:"relative",bottom:"3px"}},"\xd7")))},s.successMessage=function(){if("success"===s.state.message.type)return l.a.createElement("div",{className:"d-inline-block alert alert-success alert-dismissible fade show mx-4 sticky-top",role:"alert"},s.state.message.text,l.a.createElement("button",{type:"button",className:"close h-100","data-dismiss":"alert","aria-label":"Close",onClick:s.clearMessage},l.a.createElement("span",{"aria-hidden":"true",style:{position:"relative",bottom:"3px"}},"\xd7")))},s.dangerMessage=function(){if("danger"===s.state.message.type)return l.a.createElement("div",{className:"d-inline-block alert alert-danger alert-dismissible fade show mx-4 sticky-top",role:"alert"},s.state.message.text,l.a.createElement("button",{type:"button",className:"close h-100","data-dismiss":"alert","aria-label":"Close",onClick:s.clearMessage},l.a.createElement("span",{"aria-hidden":"true",style:{position:"relative",bottom:"3px"}},"\xd7")))},s.componentDidMount=function(){navigator.onLine?s.loadAllResources():s.setMessage("warning","Please Check Your internet connection")},s.setloggedInFromLocalStorage=function(){"true"===localStorage.getItem("loggedIn")?(s.setLoggedIn(),console.log("weeeeeeeeee")):s.setState({loggedIn:!1})},s.setUserDetails=function(e){var t=localStorage.getItem("userId");t?E.a.get("".concat(v,"/api/user/getUser/").concat(t)).then((function(e){null!==e.data&&s.setState({userDetails:e.data})})):void 0!==e?s.setState({userDetails:e}):s.setState({loggedIn:!1})},s.checkUserId=function(){s.state.userDetails._id!==localStorage.getItem("userId")&&s.setState({loggedIn:!1})},s.setLoggedIn=function(){0===s.state.users.length&&s.loadAllResources(),s.setState({loggedIn:!0}),localStorage.setItem("loggedIn",!0)},s.logout=function(){s.setState({loggedIn:!1}),localStorage.clear()},s.loadAllResources=function(){s.loadAllUsers(),s.loadAllSpareParts(),s.loadAllVehicles(),s.loadUnAuthorizedPurchases(),s.loadUnAuthorizedUsage()},s.loadAllUsers=function(){E.a.get("".concat(v,"/api/user/lists")).then((function(e){null!==e.data&&(console.log(e.data),s.setState({users:e.data}))}))},s.loadAllSpareParts=function(){E.a.get("".concat(v,"/api/sparepart/list")).then((function(e){null!==e.data&&(console.log(e.data),s.setState({spareParts:e.data}))}))},s.loadAllVehicles=function(){E.a.get("".concat(v,"/api/vehicle/list")).then((function(e){null!==e.data&&(console.log(e.data),s.setState({vehicles:e.data}))}))},s.loadUnAuthorizedPurchases=function(){E.a.get("".concat(v,"/api/purchasehistory/getunauthorizedpurchasehistory")).then((function(e){200===e.status&&(s.setState({unAuthorizedPurchases:e.data}),console.log(e.data))}))},s.loadUnAuthorizedUsage=function(){E.a.get("".concat(v,"/api/usagehistory/getunauthorizedusagehistory")).then((function(e){200===e.status&&(s.setState({unAuthorizedUsage:e.data}),console.log(e.data))}))},s.doesPasswordMatch=function(e){return e===s.state.userDetails.password},s.userAccessDetails=function(e){var t="";return s.state.users.map((function(a){a._id===e&&(t=a)})),t},s.updateUserDetails=function(e){var t=s.state.users;t.map((function(t){t._id===e._id&&(t=e)})),s.setState({users:t})},s.updateSparePartDetails=function(e){var t=s.state.spareParts;t.map((function(t){t._id===e._id&&(t=Object(c.a)(Object(c.a)({},t),e),console.log(t))})),s.setState({spareParts:t}),console.log()},s.toggleSidebar=function(){document.getElementById("sidebar").classList.toggle("d-none")},s.doesSparePartExist=function(e){var t=!1;return s.state.spareParts.map((function(a){a.itemName.toLowerCase().trim()===e.toLowerCase().trim()&&(t=!0)})),t},s.sparePartDetails=function(e){var t="";return s.state.spareParts.map((function(a){a._id===e&&(t=a)})),t},s.sparePartDetailsByItemname=function(e){var t="";return s.state.spareParts.map((function(a){a.itemName===e&&(t=a)})),t},s.allCategories=function(){var e=[];return s.state.spareParts.map((function(t){e.push(t.category)})),Object(o.a)(new Set([].concat(e)))},s.allItemNames=function(){var e=[];return s.state.spareParts.map((function(t){e.push(t.itemName)})),e.sort()},s.allVehicles=function(){var e=[];return s.state.vehicles.map((function(t){e.push(t.plateNumber)})),e.sort()},s.state={message:{type:"",text:""},loggedIn:!1,openModal:"",userDetails:{},users:[],spareParts:[],vehicles:[],unAuthorizedPurchases:[],unAuthorizedUsage:[]},s}return Object(m.a)(a,[{key:"render",value:function(){return!1===this.state.loggedIn?l.a.createElement(x,{doesPasswordMatch:this.doesPasswordMatch,setUserDetails:this.setUserDetails,setLoggedIn:this.setLoggedIn,loadAllUsers:this.loadAllUsers}):l.a.createElement(p.a,null,l.a.createElement("section",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement(B,{openModal:this.state.openModal,userDetails:this.state.userDetails,userName:this.state.userDetails.fullname,position:this.state.userDetails.position,toggleSidebar:this.toggleSidebar}),l.a.createElement("main",{className:"col p-0"},l.a.createElement(T,{userDetails:this.state.userDetails,unAuthorizedPurchases:this.state.unAuthorizedPurchases,unAuthorizedUsage:this.state.unAuthorizedUsage,toggleSidebar:this.toggleSidebar,logout:this.logout}),this.warningMessage(),this.successMessage(),this.dangerMessage(),l.a.createElement(h.a,{exact:!0,path:"/"},l.a.createElement(K,{userDetails:this.state.userDetails,allSpareParts:this.state.spareParts,allItemNames:this.allItemNames,allVehicles:this.allVehicles,sparePartDetailsByItemname:this.sparePartDetailsByItemname,loadAllSpareParts:this.loadAllSpareParts,updateSparePartDetails:this.updateSparePartDetails,loadUnAuthorizedPurchases:this.loadUnAuthorizedPurchases,loadUnAuthorizedUsage:this.loadUnAuthorizedUsage,setActiveModal:this.setActiveModal,resetActiveModal:this.resetActiveModal,setMessage:this.setMessage,clearMessage:this.clearMessage})),l.a.createElement(h.a,{exact:!0,path:"/newSparePart"},l.a.createElement(X,{userDetails:this.state.userDetails,doesNewSparePartExist:this.doesSparePartExist,loadAllSpareParts:this.loadAllSpareParts,setMessage:this.setMessage,clearMessage:this.clearMessage})),l.a.createElement(h.a,{exact:!0,path:"/sparepartdetails/:id"},l.a.createElement($,{userDetails:this.state.userDetails,sparePartDetails:this.sparePartDetails,allCategories:this.allCategories(),loadAllSpareParts:this.loadAllSpareParts,updateSparePartDetails:this.updateSparePartDetails,doesSparePartExist:this.doesSparePartExist,setActiveModal:this.setActiveModal,resetActiveModal:this.resetActiveModal,setMessage:this.setMessage,clearMessage:this.clearMessage})),l.a.createElement(h.a,{exact:!0,path:"/users"},l.a.createElement(z,{userDetails:this.state.userDetails,allUsers:this.state.users})),l.a.createElement(h.a,{exact:!0,path:"/editUsers/:id"},l.a.createElement(W,{userDetails:this.state.userDetails,userAccessDetails:this.userAccessDetails,updateUserDetails:this.updateUserDetails,setMessage:this.setMessage,clearMessage:this.clearMessage})),l.a.createElement(h.a,{exact:!0,path:"/vehicles"},l.a.createElement(se,{userDetails:this.state.userDetails,allVehicles:this.state.vehicles,loadAllVehicles:this.loadAllVehicles,setActiveModal:this.setActiveModal,resetActiveModal:this.resetActiveModal})),l.a.createElement(h.a,{exact:!0,path:"/authorization"},l.a.createElement(ne,{userDetails:this.state.userDetails,loadUnAuthorizedPurchases:this.loadUnAuthorizedPurchases,purchaseRequests:this.state.unAuthorizedPurchases,loadUnAuthorizedUsage:this.loadUnAuthorizedUsage,usageRequests:this.state.unAuthorizedUsage,allItemNames:this.allItemNames(),allVehicles:this.allVehicles(),sparePartDetailsByItemname:this.sparePartDetailsByItemname,loadAllSpareParts:this.loadAllSpareParts})),l.a.createElement(h.a,{exact:!0,path:"/history"},l.a.createElement(oe,null)),l.a.createElement(h.a,{exact:!0,path:"/itemHistory/:itemName",component:ce})))))}}]),a}(l.a.Component);n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ie,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1f9e5971.chunk.js.map